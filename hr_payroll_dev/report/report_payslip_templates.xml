<?xml version="1.0" encoding="utf-8"?>
<odoo>
<template id="report_payslip">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
            <t t-call="web.external_layout">
                <div class="page" t-attf-style="background-image: url(&quot;/hr_payroll_dev/static/src/img/confidential.png&quot;); background-size: cover; background-position: 70% 20%;">
                    <h2>Pay Slip - <span t-field="o.number"/></h2>
                    <p t-field="o.name"/>

                    <table class="table table-sm table-bordered">
                        <tr>
                            <td><strong>Name</strong></td>
                            <td><span t-field="o.employee_id.name"/></td>
                            <td><strong>Job Position</strong></td>
                            <td><span t-field="o.employee_id.job_id"/></td>
                        </tr>
                        <tr>
                            <td><strong>NRP</strong></td>
                            <td><span t-field="o.employee_id.nrp"/></td>
                            <td><strong>PTKP</strong></td>
                            <td><span t-field="o.employee_id.ptkp_id"/></td>
                        </tr>
                        <!--<tr>
                            <td><strong>Address</strong></td>
                            <td colspan="3">
                                <div t-field="o.employee_id.address_home_id"
                                    t-options='{"widget": "contact", "fields": ["address", "name", "phone"], "no_marker": True, "phone_icons": True}'/>
                            </td>
                        </tr>-->
                        <!--<tr>
                            <td><strong>Email</strong></td>
                            <td><span t-field="o.employee_id.work_email"/></td>
                            <td><strong>Reference</strong></td>
                            <td><span t-field="o.number"/></td>
                        </tr>-->
                        <!--<tr>
                            <td><strong>Identification No</strong></td>
                            <td><span t-field="o.employee_id.identification_id"/></td>
                            <td><strong>Bank Account</strong></td>
                            <td><span t-field="o.employee_id.bank_account_id"/></td>
                        </tr>-->
                        <tr>
                            <td><strong>Date From</strong></td>
                            <td><span t-field="o.date_from"/></td>
                            <td><strong>Date To</strong></td>
                            <td><span t-field="o.date_to"/></td>
                        </tr>
                    </table>
                    <br/>
                    <span><strong>Salary Detail:</strong></span>
                    <table class="table table-sm">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th style="text-align:right;">Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip)" t-as="line">
                                <t t-if="line.total != 0">
                                    <t t-if="line.bold_on_payslip">
                                        <td style="text-align:right;">
                                            <strong><span t-field="line.name"/></strong>
                                        </td>
                                    </t>
                                    <t t-else="">
                                        <td>
                                            <span t-field="line.name"/>
                                        </td>
                                    </t>
                                    <td style="text-align:right;">
                                        <t t-if="line.bold_on_payslip">
                                            <strong><span t-esc="line.total" t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/></strong>
                                        </t>
                                        <t t-else="">
                                            <span t-esc="line.total" t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/>
                                        </t>
                                    </td>
                                </t>
                            </tr>
                        </tbody>
                    </table>
                    <span><strong>Terbilang :</strong></span>
                    <p>
                        <span t-field="o.terbilang"/>
                    </p>
                    <br/>
                    <span><strong>Other Information:</strong></span>
                    <table class="table table-sm">
                        <thead>
                            <tr>
                                <th style="text-align:center;">Description</th>
                                <!--<th style="text-align:center;">Code</th>-->
                                <th style="text-align:center;">Number of Days</th>
                                <th style="text-align:center;">Number of Hours</th>
                                <th style="text-align:center;">Remaining Days</th>
                                <!--<th style="text-align:center;">Contract</th>-->
                                <th style="text-align:center;">Quantity</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr t-foreach="o.worked_days_line_ids" t-as="line_work">
                                <td><span t-field="line_work.name"/></td>
                                <!--<td><span t-field="line_work.code"/></td>-->
                                <td style="text-align:right;"><t t-esc="'{0:,.0f}'.format(line_work.number_of_days) if line_work.number_of_days > 0 else ''"/></td>
                                <td style="text-align:right;"><t t-esc="'{0:,.2f}'.format(line_work.number_of_hours) if line_work.number_of_hours > 0 else ''"/></td>
                                <td style="text-align:right;"><t t-esc="'{0:,.0f}'.format(line_work.remaining_days) if line_work.remaining_days > 0 else ''"/></td>
                                <td style="text-align:right;"><t t-esc="'{0:,.0f}'.format(line_work.quantity) if line_work.quantity > 0 else ''"/></td>
                                <!--<td><span t-field="line_work.contract_id.name"/></td>-->
                            </tr>
                        </tbody>
                    </table>
                    <p class="text-right" style="padding-bottom:50px;"><strong>Authorized signature</strong></p>

                    <span><strong>Note :</strong></span>
                    <p>
                        BILAMANA DALAM WAKTU 15 HARI TERHITUNG SEJAK TANGGAL PENGIRIMAN TIDAK ADA SANGGAHAN, MAKA PEKERJA DIANGGAP TELAH MENYETUJUI DAN SLIP INI DIANGGAP SAH
                    </p>
                </div>
            </t>
        </t>
    </t>
</template>
</odoo>
